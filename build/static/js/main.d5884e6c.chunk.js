(this["webpackJsonpqkart-frontend-v2-hooks"]=this["webpackJsonpqkart-frontend-v2-hooks"]||[]).push([[0],{121:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},153:function(e,t,a){},155:function(e){e.exports=JSON.parse("{}")},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(33),s=a.n(c),i=(a(121),a(5)),o=a(18),l=a(14),d=a(22),u=a(12),j=a(209),h=a(220),b=a(225),p=a(231),O=a(206),m=a(20),x=a(34),f=a(26),g=a.n(f),v=a(36),k=(a(143),a(1)),w=function(){return Object(k.jsxs)(O.a,{className:"footer",children:[Object(k.jsx)(O.a,{children:Object(k.jsx)("img",{src:"logo_dark.svg",alt:"QKart-icon"})}),Object(k.jsx)("p",{className:"footer-text",children:"QKart is your one stop solution to the buy the latest trending items with India's Fastest Delivery to your doorstep"})]})},y=a(102),C=a.n(y),N=a(226),S=a(229),I=a(207),A=(a(144),function(e){var t=e.children,a=e.hasHiddenAuthButtons,n=Object(m.f)();return!0===a?Object(k.jsxs)(I.a,{className:"header",children:[Object(k.jsx)(I.a,{className:"header-title",children:Object(k.jsx)("img",{src:"logo_light.svg",alt:"QKart-icon"})}),Object(k.jsx)(b.a,{className:"explore-button",startIcon:Object(k.jsx)(C.a,{}),variant:"text",onClick:function(){n.push("/")},children:"Back to explore"})]}):localStorage.getItem("username")?Object(k.jsxs)(I.a,{className:"header",children:[Object(k.jsx)(I.a,{className:"header-title",children:Object(k.jsx)("img",{src:"logo_light.svg",alt:"QKart-icon"})}),t,Object(k.jsxs)(j.a,{direction:"row",spacing:2,children:[Object(k.jsx)(N.a,{alt:localStorage.getItem("username"),src:"avatar.png"}),Object(k.jsx)(S.a,{variant:"h6",gutterBottom:!0,children:localStorage.getItem("username")}),Object(k.jsx)(b.a,{className:"explore-button",variant:"text",onClick:function(){localStorage.removeItem("username"),localStorage.removeItem("token"),localStorage.removeItem("balance"),window.location.reload(),n.push("/")},children:"Logout"})]})]}):Object(k.jsxs)(I.a,{className:"header",children:[Object(k.jsx)(I.a,{className:"header-title",children:Object(k.jsx)("img",{src:"logo_light.svg",alt:"QKart-icon"})}),t,Object(k.jsxs)(I.a,{className:"login-register",children:[Object(k.jsx)(b.a,{className:"login-button",varient:"text",onClick:function(){n.push("/login")},children:"LOGIN"}),Object(k.jsx)(b.a,{className:"register-button",variant:"contained",onClick:function(){n.push("/register")},children:"REGISTER"})]})]})}),E=(a(153),function(e){var t=Object(v.b)().enqueueSnackbar,a=Object(n.useState)({username:"",password:"",confirmPassword:""}),r=Object(u.a)(a,2),c=r[0],s=r[1],f=Object(n.useState)(!1),y=Object(u.a)(f,2),C=y[0],N=y[1],S=Object(n.useState)(!1),I=Object(u.a)(S,2),E=I[0],P=I[1],q=Object(m.f)();Object(n.useEffect)((function(){E&&q.push("/login")}),[E,q]);var D=function(){var e=Object(d.a)(Object(l.a)().mark((function e(a){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N(!0),!T(a)){e.next=4;break}return e.next=4,g.a.post("".concat(ie.endpoint,"/auth/register"),{username:a.username,password:a.password}).then((function(e){e.data.success&&t("User registration successfully",{variant:"success"})})).catch((function(e){N(!1),e.response.data.success||400!==e.response.status?t("Something went wrong!",{variant:"error"}):t(e.response.data.message,{variant:"error"})}));case 4:N(!1),P(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e){return e.username?e.username.length<6?(t("Username must be at least 6 characters",{variant:"error"}),!1):e.password?e.password.length<6?(t("Password must be at least 6 characters",{variant:"error"}),!1):e.password===e.confirmPassword||(t("Passwords do not match",{variant:"error"}),!1):(t("Password is a required field",{variant:"error"}),!1):(t("Username is a required field",{variant:"error"}),!1)},B=function(e){var t=e.target.value,a=e.target.name;s(Object(o.a)(Object(o.a)({},c),{},Object(i.a)({},a,t)))};return Object(k.jsxs)(O.a,{display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"100vh",children:[Object(k.jsx)(A,{hasHiddenAuthButtons:!0}),Object(k.jsx)(O.a,{className:"content",children:Object(k.jsxs)(j.a,{spacing:2,className:"form",children:[Object(k.jsx)("h2",{className:"title",children:"Register"}),Object(k.jsx)(h.a,{id:"username",label:"Username",variant:"outlined",title:"Username",name:"username",placeholder:"Enter Username",onChange:B,fullWidth:!0}),Object(k.jsx)(h.a,{id:"password",variant:"outlined",label:"Password",name:"password",type:"password",helperText:"Password must be atleast 6 characters length",fullWidth:!0,placeholder:"Enter a password with minimum 6 characters",onChange:B}),Object(k.jsx)(h.a,{id:"confirmPassword",variant:"outlined",label:"Confirm Password",name:"confirmPassword",type:"password",fullWidth:!0,onChange:B}),C?Object(k.jsx)("div",{className:"loading",children:Object(k.jsx)(p.a,{})}):Object(k.jsx)(b.a,{onClick:function(e){e.preventDefault(),D(c)},className:"button",variant:"contained",children:"Register Now"}),Object(k.jsxs)("p",{className:"secondary-action",children:["Already have an account?"," ",Object(k.jsx)(x.b,{className:"link",to:"/login",children:"Login here"})]})]})}),Object(k.jsx)(w,{})]})}),P=(a(155),a(156),function(){var e=Object(v.b)().enqueueSnackbar,t=Object(n.useState)({username:"",password:""}),a=Object(u.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),O=Object(u.a)(s,2),f=O[0],y=O[1],C=Object(n.useState)(!1),N=Object(u.a)(C,2),S=N[0],E=N[1],P=Object(m.f)();Object(n.useEffect)((function(){S&&P.push("/")}),[S,P]);var q=function(){var t=Object(d.a)(Object(l.a)().mark((function t(a){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(y(!0),!D(a)){t.next=4;break}return t.next=4,g.a.post("".concat(ie.endpoint,"/auth/login"),{username:a.username,password:a.password}).then((function(t){t.data.success&&(e("Logged in",{variant:"success"}),T(t.data.token,t.data.username,t.data.balance),E(!0))})).catch((function(t){t.response.data.success||400!==t.response.status||e(t.response.data.message,{varient:"error"})}));case 4:y(!1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=function(t){return t.username?!!t.password||(e("Password is a required field",{variant:"error"}),!1):(e("Username is a required field",{variant:"error"}),!1)},T=function(e,t,a){localStorage.setItem("token",e),localStorage.setItem("username",t),localStorage.setItem("balance",a)},B=function(e){var t=e.target.value,a=e.target.name;c(Object(o.a)(Object(o.a)({},r),{},Object(i.a)({},a,t)))};return Object(k.jsxs)(I.a,{display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"100vh",children:[Object(k.jsx)(A,{hasHiddenAuthButtons:!0}),Object(k.jsx)(I.a,{className:"content",children:Object(k.jsxs)(j.a,{spacing:2,className:"form",children:[Object(k.jsx)("h2",{className:"title",children:"Login"}),Object(k.jsx)(h.a,{id:"username",label:"Username",variant:"outlined",title:"Username",name:"username",onChange:B,fullWidth:!0}),Object(k.jsx)(h.a,{id:"password",variant:"outlined",label:"Password",name:"password",type:"password",fullWidth:!0,onChange:B}),f?Object(k.jsx)("div",{className:"loading",children:Object(k.jsx)(p.a,{})}):Object(k.jsx)(b.a,{onClick:function(e){e.preventDefault(),q(r)},className:"button",variant:"contained",children:"LOGIN TO QKART"}),Object(k.jsxs)("p",{className:"secondary-action",children:["Don\u2019t have an account?"," ",Object(k.jsx)(x.b,{className:"link",to:"/register",children:"Register now"})]})]})}),Object(k.jsx)(w,{})]})}),q=a(216),D=a(217),T=a(236),B=a(227),z=a(211),R=a(212),L=a(213),W=a(214),_=a(232),J=(a(157),function(e,t){var a=null===e||void 0===e?void 0:e.map((function(e){return e.productId})),n=null===t||void 0===t?void 0:t.filter((function(e){return null===a||void 0===a?void 0:a.includes(e._id)}));return null===n||void 0===n?void 0:n.map((function(t,a){return{name:t.name,qty:e[a].qty,category:t.category,cost:t.cost,rating:t.rating,image:t.image,productId:t._id}}))}),U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.reduce((function(e,t){return e+t.cost*t.qty}),0);return t},Q=function(e){var t=e.value,a=e.handleAdd,n=e.handleDelete;return Object(k.jsxs)(j.a,{direction:"row",alignItems:"center",children:[Object(k.jsx)(_.a,{size:"small",color:"primary",onClick:n,children:Object(k.jsx)(z.a,{})}),Object(k.jsx)(O.a,{padding:"0.5rem","data-testid":"item-qty",children:t}),Object(k.jsx)(_.a,{size:"small",color:"primary",onClick:a,children:Object(k.jsx)(R.a,{})})]})},F=function(e){var t=e.products,a=e.items,n=void 0===a?[]:a,r=e.handleQuantity,c=e.isReadOnly,s=void 0!==c&&c,i=Object(m.f)();return n.length?Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(O.a,{className:"cart",children:[n.map((function(e){return Object(k.jsxs)(O.a,{display:"flex",alignItems:"flex-start",padding:"1rem",children:[Object(k.jsx)(O.a,{className:"image-container",children:Object(k.jsx)("img",{src:e.image,alt:e.name,width:"100%",height:"100%"})}),Object(k.jsxs)(O.a,{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"6rem",paddingX:"1rem",children:[Object(k.jsx)("div",{children:e.name}),Object(k.jsxs)(O.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[s?Object(k.jsxs)(O.a,{padding:"0.5rem","data-testid":"item-qty",children:["Qty: ",e.qty]}):Object(k.jsx)(Q,{value:e.qty,handleAdd:function(){r(localStorage.getItem("token"),n,t,e.productId,e.qty+1)},handleDelete:function(){r(localStorage.getItem("token"),n,t,e.productId,e.qty-1)}}),Object(k.jsxs)(O.a,{padding:"0.5rem",fontWeight:"700",children:["$",e.cost]})]})]})]},e.productId)})),Object(k.jsxs)(O.a,{padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(k.jsx)(O.a,{color:"#3C3C3C",alignSelf:"center",children:"Order total"}),Object(k.jsxs)(O.a,{color:"#3C3C3C",fontWeight:"700",fontSize:"1.5rem",alignSelf:"center","data-testid":"cart-total",children:["$",U(n)]})]}),!s&&Object(k.jsx)(O.a,{display:"flex",justifyContent:"flex-end",className:"cart-footer",children:Object(k.jsx)(b.a,{color:"primary",variant:"contained",startIcon:Object(k.jsx)(W.a,{}),className:"checkout-btn",onClick:function(e){return i.push("/checkout")},children:"Checkout"})})]})}):Object(k.jsxs)(O.a,{className:"cart empty",children:[Object(k.jsx)(L.a,{className:"empty-cart-icon"}),Object(k.jsx)(O.a,{color:"#aaa",textAlign:"center",children:"Cart is empty. Add more items to the cart to checkout."})]})},H=a(215),K=a(233),$=a(234),M=a(235),Y=a(222),G=(a(158),function(e){var t=e.product,a=e.handleAddToCart;return Object(k.jsxs)(K.a,{className:"card",children:[Object(k.jsx)($.a,{component:"img",height:"140",image:t.image,alt:"green iguana"}),Object(k.jsxs)(M.a,{children:[Object(k.jsx)(S.a,{gutterBottom:!0,variant:"h5",component:"div",children:t.name}),Object(k.jsxs)(S.a,{variant:"h6",sx:{fontWeight:"bold"},color:"#000",children:["$",t.cost]}),Object(k.jsx)(Y.a,{name:"read-only",value:t.rating,readOnly:!0})]}),Object(k.jsxs)(b.a,{variant:"contained",onClick:a,children:[" ",Object(k.jsx)(H.a,{})," ADD TO CART"]})]})}),V=(a(159),function(){var e=Object(v.b)().enqueueSnackbar,t=Object(n.useState)([]),a=Object(u.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),i=Object(u.a)(s,2),o=i[0],j=i[1],b=Object(n.useState)(0),O=Object(u.a)(b,2),m=O[0],x=O[1],f=Object(n.useState)([]),y=Object(u.a)(f,2),C=y[0],N=y[1],E=Object(n.useState)([]),P=Object(u.a)(E,2),z=P[0],R=P[1],L=function(){var t=Object(d.a)(Object(l.a)().mark((function t(){var a,n,r;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a="".concat(ie.endpoint,"/products"),t.next=4,g.a.get(a);case 4:return n=t.sent,r=n.data,j(!1),t.abrupt("return",r);case 10:t.prev=10,t.t0=t.catch(0),j(!1),c([]),e(t.t0.response.data.message,{variant:"error"});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),W=function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){var a,n,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,n=ie.endpoint+"/products/search?value=".concat(t),e.next=5,g.a.get(n);case 5:if(!(r=e.sent)){e.next=8;break}return e.abrupt("return",r.data);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.response?a=e.t0.response:console.log(e.t0);case 13:if(!a){e.next=15;break}return e.abrupt("return",a.data);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),_=function(e,t){0!==t&&clearTimeout(t);var a=setTimeout(Object(d.a)(Object(l.a)().mark((function t(){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=c,t.next=3,W(e.target.value);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)}))),500);x(a)},U=function(){var t=Object(d.a)(Object(l.a)().mark((function t(a){var n,r;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,g.a.get(ie.endpoint+"/cart",{headers:{Authorization:"Bearer ".concat(a)}});case 5:return n=t.sent,r=n.data,t.abrupt("return",r);case 10:return t.prev=10,t.t0=t.catch(2),t.t0.response&&400===t.t0.response.status?e(t.t0.response.data.message,{variant:"error"}):e("Could not fetch cart details. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"}),t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(Object(l.a)().mark((function e(){var t,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,L();case 3:return t=e.sent,j(!1),c(t),e.next=8,U(localStorage.getItem("token"));case 8:a=e.sent,N(a),R(J(a,t));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var Q=function(e,t){return e.map((function(e){return e.productId})).includes(t)},H=function(){var t=Object(d.a)(Object(l.a)().mark((function t(a,n,r,c,s){var i,o,d=arguments;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=d.length>5&&void 0!==d[5]?d[5]:{preventDuplicate:!1},t.prev=1,a){t.next=6;break}e("Login to add an item to the Cart",{variant:"warning"}),t.next=15;break;case 6:if(!i.preventDuplicate||!Q(n,c)){t.next=10;break}e("Item already in cart. Use the cart sidebar to update quantity or remove item.",{variant:"warning"}),t.next=15;break;case 10:return t.next=12,g.a.post("".concat(ie.endpoint,"/cart"),{productId:c,qty:s},{headers:{Authorization:"Bearer "+a}});case 12:o=t.sent,N(o.data),R(J(o.data,r));case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),t.t0.response&&400===t.t0.response.status&&e(t.t0.response.data.message,{variant:"error"});case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e,a,n,r,c){return t.apply(this,arguments)}}();return Object(k.jsxs)("div",{children:[Object(k.jsx)(A,{children:Object(k.jsx)("div",{className:"search",children:Object(k.jsx)(h.a,{className:"search-desktop",fullWidth:!0,size:"small",InputProps:{endAdornment:Object(k.jsx)(T.a,{position:"end",children:Object(k.jsx)(q.a,{color:"primary"})})},placeholder:"Search for items/categories",name:"search",onChange:function(e){_(e,m)}})}),hasHiddenAuthButtons:!1}),Object(k.jsx)(h.a,{className:"search-mobile",fullWidth:!0,size:"small",InputProps:{endAdornment:Object(k.jsx)(T.a,{position:"end",children:Object(k.jsx)(q.a,{color:"primary"})})},placeholder:"Search for items/categories",name:"search",onChange:function(e){_(e,m)}}),Object(k.jsxs)(B.a,{container:!0,children:[Object(k.jsx)(B.a,{item:!0,md:localStorage.getItem("username")?9:12,xs:12,children:Object(k.jsxs)(I.a,{children:[Object(k.jsx)(B.a,{container:!0,children:Object(k.jsx)(B.a,{item:!0,className:"product-grid",children:Object(k.jsx)(I.a,{className:"hero",children:Object(k.jsxs)("p",{className:"hero-heading",children:["India\u2019s ",Object(k.jsx)("span",{className:"hero-highlight",children:"FASTEST DELIVERY"})," ","to your door step"]})})})}),o?Object(k.jsxs)("div",{className:"loading",children:[Object(k.jsx)(p.a,{}),Object(k.jsx)(S.a,{variant:"p",sx:{marginTop:"1rem"},children:"Loading Products"})]}):0===r.length?Object(k.jsxs)(B.a,{container:!0,sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"50vh"},children:[Object(k.jsx)(D.a,{}),Object(k.jsx)(S.a,{variant:"p",sx:{marginTop:"1rem"},children:"No Products found"})]}):Object(k.jsx)(B.a,{container:!0,spacing:1,sx:{padding:"3rem 4rem"},children:r&&r.map((function(e){return Object(k.jsx)(B.a,{item:!0,md:3,sm:6,children:Object(k.jsx)(G,{product:e,handleAddToCart:function(){return H(localStorage.getItem("token"),C,r,e._id,1,{preventDuplicate:!0})}})},e._id)}))})]})}),localStorage.getItem("username")?Object(k.jsx)(B.a,{item:!0,md:3,xs:12,bgcolor:"#E9F5E1",children:Object(k.jsx)(F,{products:r,items:z,handleQuantity:H})}):null]}),Object(k.jsx)(w,{})]})}),X=a(218),Z=a(219),ee=a(237),te=(a(160),function(e){var t=e.token,a=e.newAddress,n=e.handleNewAddress,r=e.addAddress;return Object(k.jsxs)(O.a,{display:"flex",flexDirection:"column",children:[Object(k.jsx)(h.a,{multiline:!0,minRows:4,placeholder:"Enter your complete address",onChange:function(e){n(Object(o.a)(Object(o.a)({},a),{},{isAddingNewAddress:!0,value:e.target.value}))}}),Object(k.jsxs)(j.a,{direction:"row",my:"1rem",children:[Object(k.jsx)(b.a,{variant:"contained",onClick:function(){r(t,a)},children:"Add"}),Object(k.jsx)(b.a,{variant:"text",onClick:function(){n(Object(o.a)(Object(o.a)({},a),{},{isAddingNewAddress:!1}))},children:"Cancel"})]})]})}),ae=function(){var e=localStorage.getItem("token"),t=Object(m.f)(),a=Object(v.b)().enqueueSnackbar,r=Object(n.useState)([]),c=Object(u.a)(r,2),s=c[0],i=c[1],j=Object(n.useState)([]),h=Object(u.a)(j,2),p=h[0],x=h[1],f=Object(n.useState)({all:[],selected:""}),y=Object(u.a)(f,2),C=y[0],N=y[1],I=Object(n.useState)({isAddingNewAddress:!1,value:""}),E=Object(u.a)(I,2),P=E[0],q=E[1],D=function(){var e=Object(d.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("".concat(ie.endpoint,"/products"));case 3:return t=e.sent,x(t.data),e.abrupt("return",t.data);case 8:if(e.prev=8,e.t0=e.catch(0),!e.t0.response||500!==e.t0.response.status){e.next=15;break}return a(e.t0.response.data.message,{variant:"error"}),e.abrupt("return",null);case 15:a("Could not fetch products. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"});case 16:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,g.a.get("".concat(ie.endpoint,"/cart"),{headers:{Authorization:"Bearer ".concat(t)}});case 5:return n=e.sent,e.abrupt("return",n.data);case 9:return e.prev=9,e.t0=e.catch(2),a("Could not fetch cart details. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"}),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return console.log("getaddress out side working"),e.prev=3,e.next=6,g.a.get("".concat(ie.endpoint,"/user/addresses"),{headers:{Authorization:"Bearer ".concat(t)}});case 6:return n=e.sent,console.log("-----working-----",n.data),N(Object(o.a)(Object(o.a)({},C),{},{all:n.data})),e.abrupt("return",n.data);case 12:return e.prev=12,e.t0=e.catch(3),a("Could not fetch addresses. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"}),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(d.a)(Object(l.a)().mark((function e(t,n){var r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("".concat(ie.endpoint,"/user/addresses"),{address:n.value},{headers:{Authorization:"Bearer ".concat(t)}});case 3:return r=e.sent,q(Object(o.a)(Object(o.a)({},n),{},{isAddingNewAddress:!1})),N(Object(o.a)(Object(o.a)({},C),{},{all:r.data})),e.abrupt("return",r.data);case 9:e.prev=9,e.t0=e.catch(0),e.t0.response?a(e.t0.response.data.message,{variant:"error"}):a("Could not add this address. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(Object(l.a)().mark((function e(t,n){var r,c;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="".concat(ie.endpoint,"/user/addresses/").concat(n),e.next=4,g.a.delete(r,{headers:{Authorization:"Bearer ".concat(t)}});case 4:return c=e.sent,N(Object(o.a)(Object(o.a)({},C),{},{all:c.data})),e.abrupt("return",c.data);case 9:e.prev=9,e.t0=e.catch(0),e.t0.response?a(e.t0.response.data.message,{variant:"error"}):a("Could not delete this address. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),W=function(e,t){return localStorage.getItem("balance")<U(e)?(a("You do not have enough balance in your wallet for this purchase",{variant:"error"}),!1):0===t.length?(a("Please add a new address before proceeding.",{variant:"error"}),!1):""!==t.selected||(a("Please select one shipping address to proceed.",{variant:"error"}),!1)},_=function(){var e=Object(d.a)(Object(l.a)().mark((function e(n,r,c){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W(r,c)){e.next=13;break}return e.prev=1,e.next=4,g.a.post("".concat(ie.endpoint,"/cart/checkout"),{addressId:c.selected},{headers:{Authorization:"Bearer ".concat(n)}});case 4:e.sent,localStorage.setItem("balance",localStorage.getItem("balance")-U(r)),a("Order placed successfully",{variant:"success"}),t.push("/thanks"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.response?a(e.t0.response.data.message,{variant:"error"}):a("Could not delete this address. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a,n){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var n=function(){var n=Object(d.a)(Object(l.a)().mark((function n(){var r,c,s;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!localStorage.getItem("token")){n.next=16;break}return console.log("if is working"),z(localStorage.getItem("token")),n.next=5,D();case 5:return r=n.sent,n.next=8,T(e);case 8:if(c=n.sent,!r||!c){n.next=14;break}return n.next=12,J(c,r);case 12:s=n.sent,i(s);case 14:n.next=18;break;case 16:a("you need to log in before checkout"),t.push("/");case 18:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(A,{}),Object(k.jsxs)(B.a,{container:!0,children:[Object(k.jsx)(B.a,{item:!0,xs:12,md:9,children:Object(k.jsxs)(O.a,{className:"shipping-container",minHeight:"100vh",children:[Object(k.jsx)(S.a,{color:"#3C3C3C",variant:"h4",my:"1rem",children:"Shipping"}),Object(k.jsx)(S.a,{color:"#3C3C3C",my:"1rem",children:"Manage all the shipping addresses you want. This way you won't have to enter the shipping address manually with every order. Select the address you want to get your order delivered."}),Object(k.jsx)(ee.a,{}),0===C.all.length?Object(k.jsx)(S.a,{my:"1rem",children:"No addresses found for this account. Please add one to proceed"}):C.all.map((function(t){return Object(k.jsxs)(O.a,{className:"address-item ".concat(C.selected?"selected":"not-selected"),onClick:function(e){N((function(e){return Object(o.a)(Object(o.a)({},e),{},{selected:t._id})}))},children:[Object(k.jsx)(S.a,{variant:"p",children:t.address}),Object(k.jsx)(b.a,{variant:"text",startIcon:Object(k.jsx)(X.a,{}),onClick:function(a){L(e,t._id)},children:"DELETE"})]},t._id)})),P.isAddingNewAddress?Object(k.jsx)(te,{token:e,newAddress:P,handleNewAddress:q,addAddress:R}):Object(k.jsx)(b.a,{color:"primary",variant:"contained",id:"add-new-btn",size:"large",onClick:function(){q((function(e){return Object(o.a)(Object(o.a)({},e),{},{isAddingNewAddress:!0})}))},children:"Add new address"}),Object(k.jsx)(S.a,{color:"#3C3C3C",variant:"h4",my:"1rem",children:"Payment"}),Object(k.jsx)(S.a,{color:"#3C3C3C",my:"1rem",children:"Payment Method"}),Object(k.jsx)(ee.a,{}),Object(k.jsxs)(O.a,{my:"1rem",children:[Object(k.jsx)(S.a,{children:"Wallet"}),Object(k.jsxs)(S.a,{children:["Pay $",U(s)," of available $",localStorage.getItem("balance")]})]}),Object(k.jsx)(b.a,{startIcon:Object(k.jsx)(Z.a,{}),variant:"contained",onClick:function(){_(e,s,C)},children:"PLACE ORDER"})]})}),Object(k.jsx)(B.a,{item:!0,xs:12,md:3,bgcolor:"#E9F5E1",children:Object(k.jsx)(F,{isReadOnly:!0,products:p,items:s})})]}),Object(k.jsx)(w,{})]})},ne=(a(161),function(){var e=Object(m.f)();return Object(n.useEffect)((function(){localStorage.getItem("token")||e.push("/")}),[e]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(A,{}),Object(k.jsxs)(O.a,{className:"greeting-container",children:[Object(k.jsx)("h2",{children:"Yay! It's ordered \ud83d\ude03"}),Object(k.jsx)("p",{children:"You will receive an invoice for your order shortly."}),Object(k.jsx)("p",{children:"Your order will arrive in 7 business days."}),Object(k.jsx)("p",{id:"balance-overline",children:"Wallet Balance"}),Object(k.jsxs)("p",{id:"balance",children:["$",localStorage.getItem("balance")," Available"]}),Object(k.jsx)(b.a,{variant:"contained",size:"large",id:"continue-btn",onClick:function(){e.push("/")},children:"Continue Shopping"})]}),Object(k.jsx)(w,{})]})}),re=a(224),ce=a(85),se=Object(ce.a)({typography:{fontFamily:"Lato"},variantMapping:{h1:"h2",h2:"h2",h3:"h2",h4:"h2",h5:"h2",h6:"h2",subtitle1:"h2",subtitle2:"h2",body1:"span",body2:"span"},palette:{primary:{light:"#45c09f",main:"#00a278",dark:"#00845c",contrastText:"#fff"}}}),ie={endpoint:"https://qkart-sumeet.herokuapp.com/api/v1"};var oe=function(){return Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(re.a,{theme:se,children:Object(k.jsx)("div",{className:"App",children:Object(k.jsx)(x.a,{children:Object(k.jsxs)(m.c,{children:[Object(k.jsx)(m.a,{exact:!0,path:"/",component:V}),Object(k.jsx)(m.a,{path:"/register",component:E}),Object(k.jsx)(m.a,{path:"/login",component:P}),Object(k.jsx)(m.a,{path:"/checkout",component:ae}),Object(k.jsx)(m.a,{path:"/thanks",component:ne})]})})})})})};s.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(v.a,{maxSnack:1,anchorOrigin:{vertical:"bottom",horizontal:"center"},preventDuplicate:!0,children:Object(k.jsx)(oe,{})})}),document.getElementById("root"))}},[[162,1,2]]]);
//# sourceMappingURL=main.d5884e6c.chunk.js.map